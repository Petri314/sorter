<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="styles.css" rel="stylesheet">
  <title>Tabla HTML</title>
  <style>
    table {
      border-collapse: collapse;
      width: 100%;
      max-width: 600px;
      margin: 0 auto;
    }

    td, th {
      border: 1px solid black;
      padding: 0px;
    }

    .numero-input {
      width: 6px;
    }

    .button-container {
      text-align: right;
      margin-top: 10px;
    }

    @media (max-width: 600px) {
      table {
        width: 100%;
        margin: 0;
      }
      
      .numero-input {
        width: 100%;
      }
    }
  </style>
</head>
<body>

  <table>
    <thead>
      <tr>
        <th>Cámara</th>
        <th>Total Turno</th>
        <th>#1</th>
        <th>#2</th>
        <th>#3</th>
        <th>#4</th>
        <th>#5</th>
        <th>#6</th>
        <th>#7</th>
        <th>#8</th>
        <th>#9</th>
        <th>#10</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Fiambrería</td>
        <td class="total-turno negrita-centrado"></td>
        <td><input type="text" class="numero-input" oninput="sumarFila(this, 'fiambreria')" pattern="[0-9]*" inputmode="numeric"></td>
        <td><input type="text" class="numero-input" oninput="sumarFila(this, 'fiambreria')" pattern="[0-9]*" inputmode="numeric"></td>
        <td><input type="text" class="numero-input" oninput="sumarFila(this, 'fiambreria')" pattern="[0-9]*" inputmode="numeric"></td>
        <td><input type="text" class="numero-input" oninput="sumarFila(this, 'fiambreria')" pattern="[0-9]*" inputmode="numeric"></td>
        <td><input type="text" class="numero-input" oninput="sumarFila(this, 'fiambreria')" pattern="[0-9]*" inputmode="numeric"></td>
        <td><input type="text" class="numero-input" oninput="sumarFila(this, 'fiambreria')" pattern="[0-9]*" inputmode="numeric"></td>
        <td><input type="text" class="numero-input" oninput="sumarFila(this, 'fiambreria')" pattern="[0-9]*" inputmode="numeric"></td>
        <td><input type="text" class="numero-input" oninput="sumarFila(this, 'fiambreria')" pattern="[0-9]*" inputmode="numeric"></td>
        <td><input type="text" class="numero-input" oninput="sumarFila(this, 'fiambreria')" pattern="[0-9]*" inputmode="numeric"></td>
        <td><input type="text" class="numero-input" oninput="sumarFila(this, 'fiambreria')" pattern="[0-9]*" inputmode="numeric"></td>

      </tr>

      <!-- Resto de las filas -->

    </tbody>
  </table>

  <div class="button-container">
    <button onclick="limpiarCampos()">Limpiar Campos</button>
  </div>

  <table>
    <thead>
      <tr>
        <th>Cámara</th>
        <th>Total Acumulado</th>
      </tr>
    </thead>
    <tbody id="tabla-acumulados">
      <!-- Filas de acumulados -->
    </tbody>
  </table>

  <script>
    var totalesAcumulados = {}; // Objeto para almacenar los totales acumulados

    function sumarFila(input, camara) {
      var fila = input.parentNode.parentNode; // Obtener la fila padre del input
      var celdas = fila.getElementsByTagName('td');
      var totalTurnoCelda = celdas[1];
      var totalTurno = 0;

      for (var i = 2; i < celdas.length; i++) {
        var valor = parseInt(celdas[i].getElementsByTagName('input')[0].value) || 0;
        totalTurno += valor;
      }

      totalTurnoCelda.innerHTML = totalTurno;

      actualizarTotalAcumulado(camara, totalTurno);
    }

    function actualizarTotalAcumulado(camara, totalTurno) {
      totalesAcumulados[camara] = totalTurno; // Almacenar el total acumulado

      var tablaAcumulados = document.getElementById('tabla-acumulados');
      var filas = tablaAcumulados.getElementsByTagName('tr');

      for (var i = 0; i < filas.length; i++) {
        var celdas = filas[i].getElementsByTagName('td');
        if (celdas[0].innerHTML === camara) {
          celdas[1].innerHTML = totalTurno;
          return; // Salir de la función si se actualizó el total acumulado
        }
      }

      // Si no se encontró una fila para la cámara, crear una nueva
      var nuevaFila = document.createElement('tr');
      var nuevaCeldaCamara = document.createElement('td');
      var nuevaCeldaTotal = document.createElement('td');
      nuevaCeldaCamara.innerHTML = camara;
      nuevaCeldaTotal.innerHTML = totalTurno;
      nuevaFila.appendChild(nuevaCeldaCamara);
      nuevaFila.appendChild(nuevaCeldaTotal);
      tablaAcumulados.appendChild(nuevaFila);
    }

    function limpiarCampos() {
      var filas = document.getElementsByTagName('tr');

      for (var i = 0; i < filas.length; i++) {
        var celdas = filas[i].getElementsByTagName('td');

        for (var j = 2; j < celdas.length; j++) {
          var input = celdas[j].getElementsByTagName('input')[0];
          input.value = '';
        }

        var totalTurnoCelda = celdas[1];
        totalTurnoCelda.innerHTML = '';
      }

      var tablaAcumulados = document.getElementById('tabla-acumulados');
      tablaAcumulados.innerHTML = ''; // Limpiar la tabla de totales acumulados
      totalesAcumulados = {}; // Reiniciar el objeto de totales acumulados
    }

    window.addEventListener('DOMContentLoaded', function() {
      var celdas = document.querySelectorAll('td');

      for (var i = 0; i < celdas.length; i++) {
        var input = celdas[i].querySelector('input');
        if (input) {
          var anchoCelda = celdas[i].offsetWidth;
          input.style.width = anchoCelda + 'px';
        }
      }
    });
  </script>
</body>
</html>
